from pathlib import Path

p = Path("bot/app_factory.py")
s = p.read_text(encoding="utf-8").replace("\r\n", "\n")

pairs = [
    ("SLH Guardian ? Security + Ops Control", "SLH Guardian ? Security + Ops Control"),
    ("???? ??? ?-SLH Guardian.", "???? ??? ?-SLH Guardian."),
    ("????? ?????? ??????, ?????, ????? ?????, ????? ?-SaaS ???.", "????? ?????? ??????, ?????, ????? ?????, ????? ?-SaaS ???."),
    ("??????:", "??????:"),
    ("/status    ????? DB/Redis/Alembic", "/status    ????? DB/Redis/Alembic"),
    ("/menu      ?????", "/menu      ?????"),
    ("/whoami    ?? ???", "/whoami    ?? ???"),
    ("/health    ??? ?????", "/health    ??? ?????"),
    ("/admin     ??? ?????", "/admin     ??? ?????"),
    ("/diag      ???????????", "/diag      ???????????"),
    ("/pingdb    ????? DB latency", "/pingdb    ????? DB latency"),
    ("/pingredis ????? Redis latency", "/pingredis ????? Redis latency"),
    ('lines = ["?? ????? ??????:', 'lines = ["?? ????? ??????:'),
    ('lines += ["", "?? ?????? ?????:', 'lines += ["", "?? ?????? ?????:'),
    ('"?? WHOAMI"', '"?? WHOAMI"'),
    ('"?? HEALTH"', '"?? HEALTH"'),
    ('"?? VARS (SET/MISSING)"', '"?? VARS (SET/MISSING)"'),
    ('"?? WEBHOOK INFO"', '"?? WEBHOOK INFO"'),
    ('"?? DIAG"', '"?? DIAG"'),
    ('"?? BOOT/ADMIN REPORT"', '"?? BOOT/ADMIN REPORT"'),
    ('"? ??? ?? ?????."', '"? ??? ?? ?????."'),
]

for a, b in pairs:
    s = s.replace(a, b)

p.write_text(s, encoding="utf-8")
print("OK: Hebrew strings restored (v2)")
